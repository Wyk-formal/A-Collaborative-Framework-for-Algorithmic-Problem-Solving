{% extends "base.html" %}

{% block title %}使用文档 - 算法竞赛RAG助手{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-lg-3">
            <!-- 侧边栏导航 -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">📚 文档导航</h5>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="#overview" class="list-group-item list-group-item-action">项目概述</a>
                        <a href="#features" class="list-group-item list-group-item-action">核心功能</a>
                        <a href="#usage" class="list-group-item list-group-item-action">使用指南</a>
                        <a href="#examples" class="list-group-item list-group-item-action">使用示例</a>
                        <a href="#api" class="list-group-item list-group-item-action">API接口</a>
                        <a href="#troubleshooting" class="list-group-item list-group-item-action">故障排除</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-9">
            <!-- 主要内容 -->
            <div class="card">
                <div class="card-header">
                    <h2 class="mb-0">📖 算法竞赛RAG助手使用文档</h2>
                </div>
                <div class="card-body">
                    
                    <!-- 项目概述 -->
                    <section id="overview" class="mb-5">
                        <h3>🎯 项目概述</h3>
                        <p>算法竞赛RAG助手是一个基于RAG（检索增强生成）技术的智能算法竞赛解决方案。它能够自动分析算法题目，检索相关知识，生成完整的C++代码，并进行自动验证。</p>
                        
                        <div class="alert alert-info">
                            <h5>✨ 主要特性</h5>
                            <ul class="mb-0">
                                <li><strong>智能题目分析</strong>：自动解析题目结构，提取关键信息</li>
                                <li><strong>混合智能检索</strong>：结合全文、向量和关键词检索</li>
                                <li><strong>代码自动生成</strong>：生成完整可运行的C++代码</li>
                                <li><strong>自动验证系统</strong>：编译运行代码，验证样例正确性</li>
                                <li><strong>迭代优化</strong>：自动修复代码错误</li>
                            </ul>
                        </div>
                    </section>

                    <!-- 核心功能 -->
                    <section id="features" class="mb-5">
                        <h3>🚀 核心功能</h3>
                        
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">🧠 智能题目分析</h5>
                                        <p class="card-text">使用AI技术自动分析算法题目，提取关键信息，识别算法类型和难度等级。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">🔍 混合智能检索</h5>
                                        <p class="card-text">结合全文搜索、向量检索和关键词匹配，精准找到最相关的算法知识。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">💻 代码自动生成</h5>
                                        <p class="card-text">基于算法知识库生成完整可运行的C++代码，符合竞赛编程标准。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">✅ 自动验证系统</h5>
                                        <p class="card-text">自动编译运行生成的代码，验证样例正确性，支持迭代优化。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 使用指南 -->
                    <section id="usage" class="mb-5">
                        <h3>📋 使用指南</h3>
                        
                        <h4>Web界面使用</h4>
                        <ol>
                            <li>在"题目内容"文本框中输入算法题目</li>
                            <li>选择是否启用代码验证（推荐启用）</li>
                            <li>点击"开始解题"按钮</li>
                            <li>实时查看解题进度和结果</li>
                        </ol>
                        
                        <h4>命令行使用</h4>
                        <div class="bg-light p-3 rounded">
                            <pre><code># 交互式模式
python cli/main.py

# 直接解题
python cli/main.py --solve "请实现快速排序算法"

# 从文件读取题目
python cli/main.py --file input.md

# 代码验证
python cli/main.py --validate code.cpp samples.txt</code></pre>
                        </div>
                    </section>

                    <!-- 使用示例 -->
                    <section id="examples" class="mb-5">
                        <h3>💡 使用示例</h3>
                        
                        <div class="accordion" id="examplesAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="example1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                                        快速排序算法实现
                                    </button>
                                </h2>
                                <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#examplesAccordion">
                                    <div class="accordion-body">
                                        <p><strong>输入题目：</strong></p>
                                        <div class="bg-light p-2 rounded">
                                            请实现快速排序算法，对给定的数组进行排序
                                        </div>
                                        <p class="mt-3"><strong>系统会：</strong></p>
                                        <ul>
                                            <li>分析题目，识别为排序算法问题</li>
                                            <li>检索快速排序相关知识</li>
                                            <li>生成完整的C++实现代码</li>
                                            <li>自动验证代码正确性</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="example2">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                                        动态规划背包问题
                                    </button>
                                </h2>
                                <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#examplesAccordion">
                                    <div class="accordion-body">
                                        <p><strong>输入题目：</strong></p>
                                        <div class="bg-light p-2 rounded">
                                            有N个物品和一个容量为V的背包，每个物品有重量和价值，求最大价值
                                        </div>
                                        <p class="mt-3"><strong>系统会：</strong></p>
                                        <ul>
                                            <li>识别为动态规划问题</li>
                                            <li>检索背包问题相关知识</li>
                                            <li>生成01背包问题的C++解决方案</li>
                                            <li>包含完整的输入输出处理</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- API接口 -->
                    <section id="api" class="mb-5">
                        <h3>🔌 API接口</h3>
                        
                        <h4>解题接口</h4>
                        <div class="bg-light p-3 rounded">
                            <pre><code>POST /solve
Content-Type: application/json

{
    "problem_content": "题目内容",
    "enable_validation": true
}</code></pre>
                        </div>
                        
                        <h4>代码验证接口</h4>
                        <div class="bg-light p-3 rounded">
                            <pre><code>POST /api/validate
Content-Type: application/json

{
    "code": "C++代码",
    "samples": [
        {
            "input": "输入样例",
            "output": "期望输出"
        }
    ]
}</code></pre>
                        </div>
                    </section>

                    <!-- 故障排除 -->
                    <section id="troubleshooting" class="mb-5">
                        <h3>🔧 故障排除</h3>
                        
                        <div class="accordion" id="troubleshootingAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="trouble1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#trouble1Collapse">
                                        端口占用问题
                                    </button>
                                </h2>
                                <div id="trouble1Collapse" class="accordion-collapse collapse show" data-bs-parent="#troubleshootingAccordion">
                                    <div class="accordion-body">
                                        <p>如果遇到"Address already in use"错误：</p>
                                        <div class="bg-light p-2 rounded">
                                            <code>export FLASK_PORT=8080</code><br>
                                            <code>python cli/main.py --web</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="trouble2">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#trouble2Collapse">
                                        代码编译失败
                                    </button>
                                </h2>
                                <div id="trouble2Collapse" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                    <div class="accordion-body">
                                        <p>检查系统是否安装了GCC编译器：</p>
                                        <div class="bg-light p-2 rounded">
                                            <code>gcc --version</code>
                                        </div>
                                        <p class="mt-2">如果没有安装，请安装GCC编译器。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="trouble3">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#trouble3Collapse">
                                        AI服务连接失败
                                    </button>
                                </h2>
                                <div id="trouble3Collapse" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                    <div class="accordion-body">
                                        <p>检查网络连接和API配置：</p>
                                        <div class="bg-light p-2 rounded">
                                            <code>curl -I https://open.bigmodel.cn</code>
                                        </div>
                                        <p class="mt-2">确保API密钥配置正确。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                </div>
            </div>
        </div>
    </div>
</div>

<script>
// 平滑滚动到锚点
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
{% endblock %}

